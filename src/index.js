module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){const n=e=>/^\{\{.*\}\}$/.test(e),o=e=>"[object Function]"==={}.toString.call(e)?e.toString():"string"==typeof e?e:"object"==typeof e?JSON.stringify(e,(e,t)=>"function"==typeof t?t.toString():t):String(e),r=e=>e.charAt(0).toUpperCase()+e.slice(1),s=e=>{const t=e.toString();return{params:t.match(/\([^\(\)]*\)/)[0].slice(1,-1),content:t.slice(t.indexOf("{")+1,t.lastIndexOf("}"))}},a=(e,t)=>{if("string"==typeof e)return n(e)?t?e.slice(1,-1):e.slice(2,-2):t?e:`'${e}'`;if("function"==typeof e){const{params:t,content:n}=s(e);return`(${t}) => {${n}}`}};e.exports={isExpression:n,toString:o,line2Hump:e=>e=(e=e.replace(/[_|-](\w)/g,(e,t)=>t.toUpperCase())).charAt(0).toUpperCase()+e.slice(1),toUpperCaseStart:r,parseStyle:(e,t)=>{for(let n in e)switch(n){case"fontSize":case"marginTop":case"marginBottom":case"paddingTop":case"paddingBottom":case"height":case"top":case"bottom":case"width":case"maxWidth":case"left":case"right":case"paddingRight":case"paddingLeft":case"marginLeft":case"marginRight":case"lineHeight":case"borderBottomRightRadius":case"borderBottomLeftRadius":case"borderTopRightRadius":case"borderTopLeftRadius":case"borderRadius":e[n]=parseInt(e[n])*t+"rpx"}return e},parseDataSource:(e,t)=>{const r=e.id,{uri:c,method:i,params:p}=e.options,l=e.type;let u={};switch(l){case"fetch":-1===t.indexOf("import {fetch} from whatwg-fetch")&&t.push("import {fetch} from 'whatwg-fetch'"),u={method:i};break;case"jsonp":-1===t.indexOf("import {fetchJsonp} from fetch-jsonp")&&t.push("import jsonp from 'fetch-jsonp'")}Object.keys(e.options).forEach(t=>{-1===["uri","method","params"].indexOf(t)&&(u[t]=o(e.options[t]))}),u=p?`${o(u).slice(0,-1)} body: ${n(p)?a(p):o(p)}}`:o(u);let d=`{\n  ${l}(${a(c)}, ${o(u)})\n    .then((response) => response.json())\n`;if(e.dataHandler){const{params:t,content:n}=s(e.dataHandler);d+=`.then((${t}) => {${n}})\n    .catch((e) => {\n      console.log('error', e);\n    })\n  `}return d+="}",{value:`function ${r}() ${d}`,imports:t}},parseFunction:s,parseLoop:(e,t,s,a)=>{let c,i=t&&t[0]||"item",p=t&&t[1]||"index";Array.isArray(e)?c=o(e):n(e)&&(c=e.slice(2,-2));const l=s.match(/^<.+?\s/)[0].length;s=`${s.slice(0,l)} key={${p}}${s.slice(l)}`;const u=new RegExp(`this.${i}`,"g");s=s.replace(u,i);let d=c;c.match(/this\.state\./)&&(d=c.split(".").pop());const f=[];return a&&f.push(`const [${d}, set${r(d)}] = useState(${o(JSON.parse(a)[d])||null});`),{hookState:f,value:`${d}.map((${i}, ${p}) => {\n      return (${s});\n    })`}},parseCondition:(e,t)=>"boolean"==typeof e?`${e} && ${t}`:"string"==typeof e?`${(e=e.replace(/this\./,"")).slice(2,-2)} && ${t}`:void 0,parseProps:a,parseState:e=>`const [state, set${r("state")}] = useState(${o(JSON.parse(e))||null});`,replaceState:e=>{const t=new RegExp("this.state","g");return e.replace(t,"state")},generateCSS:e=>{let t="";for(let o in e){t+=`.${o} {`;for(let r in e[o])t+=`${n=r,n.split(/(?=[A-Z])/).join("-").toLowerCase()}: ${e[o][r]};\n`;t+="}"}var n;return t}}},function(e,t,n){const{exportMod:o,exportPage:r}=n(2),{line2Hump:s}=n(0);e.exports=function(e,t){const n=[],a=750/(t.responsive&&t.responsive.width||750);t.scale=a,function e(t){const{json:o,scale:r}=t;switch(o.componentName.toLowerCase()){case"block":o.fileName=o.fileName||o.id,o.smart&&o.smart.layerProtocol&&o.smart.layerProtocol.module&&o.smart.layerProtocol.module.type&&(o.fileName=o.smart.layerProtocol.module.type.replace(/[@|\/]/g,"")),o.fileName=s(o.fileName),n.push(o)}o.children&&o.children.length>0&&Array.isArray(o.children)&&o.children.forEach(t=>{e({json:t,scale:r})})}({json:e,scale:a});let c=[];n.length>0&&n.forEach(e=>{const n=o(e,t);c=c.concat(n)});const i=r(e,t);return c=c.concat(i),{panelDisplay:c,noTemplate:!0}}},function(e,t,n){const{toString:o,parseLoop:r,parseStyle:s,parseFunction:a,parseProps:c,parseState:i,replaceState:p,parseCondition:l,generateCSS:u,parseDataSource:d,line2Hump:f}=n(0);e.exports={exportMod:function(e,t){const{prettier:n,scale:m}=t,$=e.fileName;let h=[],x=[];const y={},g=[];let b=null,S=[];const j=[],C=[],O=e=>{const t=e.componentName.toLowerCase(),n=e.props&&e.props.className,o=n?` style={styles.${n}}`:"";let a;n&&(y[n]=s(e.props.style,m));let i="";switch(Object.keys(e.props).forEach(t=>{-1===["className","style","text","src","key"].indexOf(t)&&(i+=` ${t}={${c(e.props[t])}}`)}),t){case"text":-1===h.indexOf("import Text from 'rax-text'")&&h.push("import Text from 'rax-text'");const t=c(e.props.text,!0);a=`<Text${o}${i}>${t}</Text>`;break;case"image":-1===h.indexOf("import Image from 'rax-image'")&&h.push("import Image from 'rax-image'");const n=c(e.props.src);a=`<Image${o}${i} source={{uri: ${n}}} />`;break;case"div":case"page":case"block":case"component":-1===h.indexOf("import View from 'rax-view'")&&h.push("import View from 'rax-view'"),a=e.children&&e.children.length?`<View${o}${i}>${w(e.children)}</View>`:`<View${o}${i} />`;break;default:const r=`import ${componentName} from '${componentName}'`;-1===h.indexOf(r)&&h.push(r),a=e.children&&e.children.length&&Array.isArray(e.children)?`<${componentName}${o}${i}>${w(e.children)}</${componentName}>`:"string"==typeof e.children?`<${componentName}${o}${i} >${e.children}</${componentName}>`:`<${componentName}${o}${i} />`}if(e.loop){const t=r(e.loop,e.loopArgs,a,b);a=t.value,S=S.concat(t.hookState)}return a=p(a),e.condition&&(a=l(e.condition,a)),(e.loop||e.condition)&&(a=`{${a}}`),a},w=e=>{let t="";const n=e.fileName||e.id;if(Array.isArray(e))e.forEach(e=>{t+=w(e)});else{const r=e.componentName.toLowerCase();if(-1!==["page"].indexOf(r)||n===$){const t=[],n=[];if(e.state&&(t.push(`state = ${o(e.state)}`),b=o(e.state)),e.methods&&Object.keys(e.methods).forEach(t=>{const{params:n,content:o}=a(e.methods[t]);j.push(`function ${t}(${n}) {${o}}`)}),e.dataSource&&Array.isArray(e.dataSource.list)&&(e.dataSource.list.forEach(e=>{"boolean"==typeof e.isInit&&e.isInit?C.push(`${e.id}();`):"string"==typeof e.isInit&&C.push(`if (${c(e.isInit)}) { ${e.id}(); }`);const t=d(e,h);j.push(t.value),h=t.imports}),e.dataSource.dataHandler)){const{params:t,content:n}=a(e.dataSource.dataHandler);j.push(`dataHandler(${t}) {${n}}`),C.push("dataHandler()")}e.lifeCycles&&(e.lifeCycles._constructor||n.push(`constructor(props, context) { super(); ${C.join("\n")}}`),Object.keys(e.lifeCycles).forEach(t=>{const{params:o,content:r}=a(e.lifeCycles[t]);"_constructor"===t?C.push(r):n.push(`${t}(${o}) {${r}}`)})),b&&S.push(i(b))}else-1!==["block"].indexOf(r)?(t+=`<${f(n)} />`,x.push(`import ${f(n)} from '../${n}';`)):t+=O(e)}return t};t.utils&&Object.keys(t.utils).forEach(e=>{g.push(`const ${e} = ${t.utils[e]}`)}),w(e);const v=O(e),N=v.match("dispatch"),I=n.format(`\n    'use strict';\n    import { createElement, useState, useEffect, useRef, memo } from 'rax';\n    ${h.join("\n")}\n    ${x.join("\n")}\n    ${N?"import { IndexContext } from '../../context';":""}\n\n    import styles from './${$}.css';\n\n    ${g.join("\n")}\n    export default memo((props) => {\n      ${S.join("\n")}\n      const hasCalled = useRef(false);\n      ${N?"const { state: { txt }, dispatch} = useContext(IndexContext);":""}\n      useEffect(() => {\n        if (!hasCalled.current) {\n          hasCalled.current = true;\n          ${C.join("\n")}\n        }\n      })\n      ${j.join("\n")}\n      return (${v})\n    });\n  `,{parser:"babel",printWidth:120,singleQuote:!0});return[{panelName:`${$}.jsx`,panelValue:I,panelType:"js",panelImports:h},{panelName:`${$}.css`,panelValue:n.format(`${u(y)}`,{parser:"css"}),panelType:"css"}]},exportPage:function(e,t){const{prettier:n,scale:m}=t,$=e.fileName||e.id;let h=[],x=[];const y={},g=[];let b=null,S=[];const j=[],C=[],O=e=>{const t=e.componentName,n=e.componentName.toLowerCase(),o=e.props&&e.props.className,a=o?` style={styles.${o}}`:"";let i;o&&(y[o]=s(e.props.style,m));let u="";switch(Object.keys(e.props).forEach(t=>{-1===["className","style","text","src","key"].indexOf(t)&&(u+=` ${t}={${c(e.props[t])}}`)}),n){case"text":-1===h.indexOf("import Text from 'rax-text'")&&h.push("import Text from 'rax-text'");const n=c(e.props.text,!0);i=`<Text${a}${u}>${n}</Text>`;break;case"image":-1===h.indexOf("import Image from 'rax-image'")&&h.push("import Image from 'rax-image'");const o=c(e.props.src);i=`<Image${a}${u} source={{uri: ${o}}} />`;break;case"div":case"page":case"block":case"component":-1===h.indexOf("import View from 'rax-view'")&&h.push("import View from 'rax-view'"),i=e.children&&e.children.length?`<View${a}${u}>${w(e.children)}</View>`:`<View${a}${u} />`;break;default:const r=`import ${t} from '${t}'`;-1===h.indexOf(r)&&h.push(r),i=e.children&&e.children.length&&Array.isArray(e.children)?`<${t}${a}${u}>${w(e.children)}</${t}>`:"string"==typeof e.children?`<${t}${a}${u} >${e.children}</${t}>`:`<${t}${a}${u} />`}if(e.loop){const t=r(e.loop,e.loopArgs,i,b);i=t.value,S=S.concat(t.hookState)}return i=p(i),e.condition&&(i=l(e.condition,i)),(e.loop||e.condition)&&(i=`{${i}}`),i},w=e=>{let t="";if(Array.isArray(e))e.forEach(e=>{t+=w(e)});else{const n=e.componentName.toLowerCase();if(-1!==["page"].indexOf(n)){const t=[],n=[];if(e.state&&(t.push(`state = ${o(e.state)}`),b=o(e.state)),e.methods&&Object.keys(e.methods).forEach(t=>{const{params:n,content:o}=a(e.methods[t]);j.push(`function ${t}(${n}) {${o}}`)}),e.dataSource&&Array.isArray(e.dataSource.list)&&(e.dataSource.list.forEach(e=>{"boolean"==typeof e.isInit&&e.isInit?C.push(`${e.id}();`):"string"==typeof e.isInit&&C.push(`if (${c(e.isInit)}) { ${e.id}(); }`);const t=d(e,h);j.push(t.value),h=t.imports}),e.dataSource.dataHandler)){const{params:t,content:n}=a(e.dataSource.dataHandler);j.push(`dataHandler(${t}) {${n}}`),C.push("dataHandler()")}e.lifeCycles&&(e.lifeCycles._constructor||n.push(`constructor(props, context) { super(); ${C.join("\n")}}`),Object.keys(e.lifeCycles).forEach(t=>{const{params:o,content:r}=a(e.lifeCycles[t]);"_constructor"===t?C.push(r):n.push(`${t}(${o}) {${r}}`)})),b&&S.push(i(b))}else if(-1!==["block"].indexOf(n)){const n=e.fileName||e.id;t+=`<${f(n)} />`,x.push(`import ${f(n)} from './${n}';`)}else t+=O(e)}return t};t.utils&&Object.keys(t.utils).forEach(e=>{g.push(`const ${e} = ${t.utils[e]}`)}),w(e);const v={parser:"babel",printWidth:120,singleQuote:!0},N=O(e),I=n.format("import { createElement, createContext, useReducer } from 'rax';\n\n    const initState = {\n      txt: 'click me' // Get data, trigger proactively useEffect\n    };\n    \n    function UserReducer(state, action) {\n      switch (action.type) {\n        case 'changeTxt':\n          return {\n            ...state,\n            txt: `click me ${action.payload.val}`\n          };\n        default:\n          return state;\n      }\n    }\n    \n    const IndexContext = createContext();\n    \n    const IndexProvider = props => {\n      const [state, dispatch] = useReducer(UserReducer, initState);\n      return (\n        <IndexContext.Provider value={{ state, dispatch }}>\n          {props.children}\n        </IndexContext.Provider>\n      );\n    };\n    \n    export { IndexContext, IndexProvider };\n  ",v),k=N.match("dispatch");return[{panelName:`${$}.jsx`,panelValue:n.format(`\n    'use strict';\n    import { createElement, useState, useEffect, useRef } from 'rax';\n    ${h.join("\n")}\n    ${x.join("\n")}\n    import { ${k?"IndexContext, IndexProvider":"IndexProvider"} } from './context';\n    import styles from './${$}.css';\n\n    ${g.join("\n")}\n    export default function Page() {\n      ${S.join("\n")}\n      const hasCalled = useRef(false);\n      ${k?"const { state: { txt }, dispatch} = useContext(IndexContext);":""}\n      useEffect(() => {\n        if (!hasCalled.current) {\n          hasCalled.current = true;\n          ${C.join("\n")}\n        }\n      })\n      ${j.join("\n")}\n      return (<IndexProvider>${N}</IndexProvider>)\n    };\n  `,v),panelType:"js",panelImports:h.concat(x)},{panelName:"context.jsx",panelValue:I,panelType:"js",panelImports:[]},{panelName:`${$}.css`,panelValue:n.format(`${u(y)}`,{parser:"css"}),panelType:"css"}]}}}]);